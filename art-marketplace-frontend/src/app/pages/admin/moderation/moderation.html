<mat-card>
  <!-- Indicateur de statut -->
  <div *ngIf="isOfflineMode" class="status-bar offline">
    <mat-icon>cloud_off</mat-icon>
    <span>Mode hors ligne - Données locales</span>
  </div>

  <div class="header">
    <h2>Modération — produits en attente</h2>
    
    <button mat-stroked-button (click)="refresh()" class="refresh-btn">
      <mat-icon>refresh</mat-icon>
      Actualiser
    </button>
  </div>

  <!-- Indicateur de chargement -->
  <div *ngIf="loading" class="loading-container">
    <mat-icon class="spinning">hourglass_empty</mat-icon>
    <span>Chargement des produits...</span>
  </div>

  <!--Message vide -->
  <div *ngIf="!loading && !list.length" class="no-products">
    <mat-icon>inventory_2</mat-icon>
    <p>Aucun produit à approuver.</p>
  </div>

  <!-- Grille de cartes -->
  <div *ngIf="!loading && list.length" class="products-grid">
    <mat-card class="product-card" *ngFor="let p of list; trackBy: trackById">
      <!-- Image du produit -->
      <div class="product-image">
        <img
          [src]="p.imageUrl || 'assets/placeholder.png'"
          [alt]="p.title"
          (error)="onImageError($event)"
          loading="lazy"
        />
        <!-- Badge d'attente -->
        <div class="pending-badge">
          <mat-icon>schedule</mat-icon>
          En attente
        </div>
      </div>

      <mat-card-content>
        <mat-card-title>{{ p.title }}</mat-card-title>
        
        <div class="product-info">
          <p class="price">{{ p.price | currency:'EUR':'symbol-narrow' }}</p>
          <p class="artisan">Artisan #{{ p.artisanId }}</p>
        </div>
        
        <p class="description" *ngIf="p.description">
          {{ p.description }}
        </p>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="approve(p)">
          <mat-icon>check</mat-icon>
          Approuver
        </button>
        <button mat-stroked-button color="warn" (click)="remove(p)">
          <mat-icon>close</mat-icon>
          Rejeter
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</mat-card>